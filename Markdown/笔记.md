# 4. CSS

## 4.1 /deep/ 深度选择器

需求：在某一组件中想要修改全局组件的样式（全局样式），但又不想直接修改全局组件的样式，而是仅在当前组件引用时更改，如：一组件要更改element对话框的内容（.el-dialog .el-dialog__body）的高度，但又不能影响到其它组件的正常使用。这种时候就需要用到/deep/.

```css
/deep/ .el-dialog .el-dialog__body{
  max-height: 71vh;
}
```

注意是在scope里更改。

## 4.2 Flex 布局

https://www.ruanyifeng.com/blog/2015/07/flex-grammar.html

## 4.3 隐藏input number的箭头

```javascript
.input_number{
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
    }
    input[type="number"]{
        -moz-appearance: textfield;
    }
}
```

## 4.4 Vue引入Scss全局变量

在vue.config.js配置如下：

```js
css: {
    loaderOptions: {
      //scss引入全局变量
      // 不同 sass-loader 版本对应关键字， v8-: data   v8: prependData   v10+: additionalData
      sass: {
        data: `@import "@/style/variables.scss";`
      },
      scss: {
        data: `@import "@/style/variables.scss";`
      }
    }
  },
```



------

# 5. Elements

## 5.1 el-date-picker选择数据后无法更新回显数据

#### 5.1.1 问题描述：

如下代码，在点击选择新的日期之后，el-date-picker显示的还是原来的日期，并且也没有触发change事件。

```vue
<el-date-picker
  v-model="row.dateRange"
  @change="handleDateChange($event,row)"
  value-format="yyyy-MM-dd"
  type="daterange"
  range-separator="—"
  :clearable="false"
  :picker-options="pickerOptions"
  start-placeholder="开始日期"
  end-placeholder="结束日期">
</el-date-picker>
```

```js
/**
 * 日期数据存储处理
 * @param row
 */
handleDateChange(data,row){
  this.$set(row,'timeNames',row.dateRange.toString())
  this.handleItemValueChange(row,'timeNames')
},
```



#### 5.1.2 原因：

首先v-model绑定的是对象里的一个值，而这一个值在之前有被重新赋值过，而赋值的方式只是简单的等号赋值。

```js
for (let item of planMode.detailList) {
  if (item.timeNames) item['dateRange'] = item.timeNames.split(',')
}
```

#### 5.1.3 解决方法：

把等号赋值改成$set的赋值方式，具体原理不明，有待补充！

```js
for (let item of planMode.detailList) {
  if (item.timeNames) this.$set(item,'dateRange',item.timeNames.split(','))
}
```



------

## 5.2 Form表单中回车事件出现页面刷新问题

### 5.2.1  问题描述：

在给输入框添加回车事件时，发现一按回车，页面就刷新了。

### 5.2.2 原因：

由于当form表单只有一个文本框时，按下回车将会触发表单的提交事件， 导致页面的刷新。

### 5.2.3 解决方案：

在el-from 加上 @submit.native.prevent


